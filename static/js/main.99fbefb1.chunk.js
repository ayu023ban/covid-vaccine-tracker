(this["webpackJsonpcovid-vaccine-tracker"]=this["webpackJsonpcovid-vaccine-tracker"]||[]).push([[0],{154:function(e,t,n){},157:function(e,t,n){},184:function(e,t,n){"use strict";n.r(t);var c,i=n(0),a=n.n(i),r=n(32),s=n.n(r),o=(n(154),n(155),n(156),n(157),n(116)),l=n(49),u=n(197),d=n(203),j=n(198),f=n(206),b=n(199),h=n(202),p=n(204),O=n(201),v=n(47),x=n(200),g=n(105),m=Object(g.a)({name:"player2",initialState:{pincodes:[]},reducers:{add:function(e,t){var n=t.payload,c=Array.from(e.pincodes);c.push(n),e.pincodes=c.filter((function(e,t,n){return n.indexOf(e)===t}))},remove:function(e,t){var n=t.payload;e.pincodes=e.pincodes.filter((function(e){return e!==n}))}}}),y=m.actions,w=y.add,k=y.remove,E=m.reducer,A=n.p+"static/media/beep.44d80d2e.mp3",C={result:{},soundEnabled:!0,audio:new Audio(A)},D=Object(g.a)({name:"player2",initialState:C,reducers:{changeResult:function(e,t){var n=t.payload;e.result[n.pincode]=n.result},deleteResult:function(e,t){var n=t.payload;delete e.result[n]}}}),S=D.actions,F=S.changeResult,P=S.deleteResult,T=D.reducer,B=n(80),N=n.n(B),G=n(132),I=n(114),L=n(133),R=n.n(L),z=n(137),H=n(23),J=Object(H.b)({pincodes:E,result:T}),M=n(77),V=Object(H.d)(J,(c=[M.a],H.a.apply(void 0,Object(z.a)(c)))),_=function(e){return new Promise((function(t){return setTimeout(t,e)}))},K=function(e){var t=e.getDate(),n=e.getMonth()+1;return t<10&&(t="0"+t),n<10&&(n="0"+n),t+"-"+n+"-"+e.getFullYear()},Y=function(){var e=new Date,t=new Date(e);return t.setDate(t.getDate()+1),[K(t)]},$=function(){var e=Object(I.a)(N.a.mark((function e(){var t,n,c,i,a,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Y(),n=V.getState().result.result,c=V.getState().pincodes.pincodes.filter((function(e){return"finding"===n[e].status||"error"===n[e].status})),i=Object(G.a)(c);try{for(r=function(){for(var e=a.value,n=0;n<t.length;n++){var c="https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByPin?pincode=".concat(e,"&date=").concat(t[n]);R.a.get(c).then((function(t){var n=t.data,c=[],i=0,a=!1;for(var r in n.centers)for(var s in n.centers[r].sessions)n.centers[r].sessions[s].available_capacity>0&&(a=!0,i+=n.centers[r].sessions[s].available_capacity,c.push(n.centers[r].name));!1===a?V.dispatch(F({pincode:e,result:{status:"finding",availability:0,centers:[]}})):V.dispatch(F({pincode:e,result:{status:"found",availability:i,centers:c}}))})).catch((function(t){V.dispatch(F({pincode:e,result:{status:"error",availability:0,centers:[]}}))}))}},i.s();!(a=i.n()).done;)r()}catch(s){i.e(s)}finally{i.f()}case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(I.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $(),t=5*V.getState().pincodes.pincodes.length,e.next=5,_(1e3*t);case 5:e.next=0;break;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=n(7),U=function(){var e=Object(i.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(i.useState)(""),r=Object(o.a)(a,2),s=r[0],g=r[1],m=Object(l.c)((function(e){return e.pincodes.pincodes})),y=Object(l.c)((function(e){return e.result.result})),E=Object(l.c)((function(e){return e.result.soundEnabled})),A=Object(l.b)(),C=Object(l.c)((function(e){return e.result.audio})),D=m.filter((function(e){return"error"===y[e].status}));return Object(i.useEffect)((function(){q()}),[]),Object(i.useEffect)((function(){C.addEventListener("ended",(function(){this.currentTime=0,this.play()}),!1)}),[C]),Object(i.useEffect)((function(){C.muted=!E}),[C,E]),Object(i.useEffect)((function(){var e=!0;Object.keys(y).forEach((function(t){"found"===y[t].status&&(e=!1,C.paused&&C.play())})),e&&!C.paused&&C.pause()}),[C,y]),Object(Q.jsxs)(u.a,{fluid:!0,className:"p-0",style:{minHeight:"100vh",position:"relative",display:"flex",flexDirection:"column",height:"100%"},children:[Object(Q.jsx)(u.a,{fluid:!0,className:"main-header-container",children:Object(Q.jsx)(d.a,{inverted:!0,textAlign:"center",className:"main-title",children:"Covid Vaccine Tracker"})}),Object(Q.jsxs)(u.a,{fluid:!0,style:{flexDirection:"3",flexGrow:1},className:"p-0",children:[Object(Q.jsxs)(u.a,{children:[Object(Q.jsx)(j.a,{hidden:!0,section:!0}),Object(Q.jsx)(d.a,{textAlign:"center",size:"huge",children:"Enter Pincode to set Alert"}),Object(Q.jsx)(f.a,{basic:!0,children:Object(Q.jsxs)(b.a,{error:s.length>0,onSubmit:function(){6!==n.length?g("Pincode can only be of 6 digits"):(A(F({pincode:n,result:{status:"finding",availability:0,centers:[]}})),A(w(n)),g(""),c(""))},children:[Object(Q.jsx)(b.a.Input,{value:n,type:"number",onChange:function(e,t){t.value.length>6?g("Pincode cannot be more than 6 digits"):g(""),/^\d*$/.test(t.value)&&c(t.value)},action:{color:"teal",content:"Go",disabled:s.length>0||6!==n.length}}),Object(Q.jsx)(h.a,{error:!0,header:"Action Forbidden",content:s})]})})]}),Object(Q.jsxs)(u.a,{children:[Object(Q.jsx)(j.a,{hidden:!0}),m.length>0&&Object(Q.jsx)(f.a,{textAlign:"center",children:Object(Q.jsx)(d.a,{children:"Gives Alert For Following Pincodes"})}),Object(Q.jsx)(p.a,{stackable:!0,columns:4,children:m.map((function(e,t){return Object(Q.jsx)(p.a.Column,{children:Object(Q.jsx)(O.a,{color:"teal",children:Object(Q.jsxs)(O.a.Content,{children:[Object(Q.jsx)(v.a,{style:{float:"right",cursor:"pointer"},name:"trash",color:"teal",onClick:function(){A(k(e)),A(P(e))}}),Object(Q.jsx)(O.a.Header,{children:e})]})})},t)}))})]}),Object(Q.jsx)(u.a,{children:m.map((function(e){return"found"===y[e].status&&Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(j.a,{hidden:!0}),Object(Q.jsxs)(f.a,{basic:!0,children:[Object(Q.jsxs)(d.a,{children:["Centers have been found in ",e," with"," ",y[e].availability," vaccines available:"]}),Object(Q.jsx)(x.a,{bulleted:!0,children:y[e].centers&&y[e].centers.filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return Object(Q.jsx)(x.a.Item,{children:e})}))})]})]})})).filter(Boolean)}),Object(Q.jsx)(j.a,{hidden:!0}),D.length>0&&Object(Q.jsx)(u.a,{basic:!0,textAlign:"center",children:Object(Q.jsxs)(h.a,{error:!0,children:["Error occured in getting data for ",D.join(", ")," ",D.length>1?"pincodes":"pincode"]})})]}),Object(Q.jsx)(u.a,{fluid:!0,className:"footer mt-4",children:Object(Q.jsxs)(d.a,{inverted:!0,textAlign:"center",children:["Keep Browser open in background in order for this app to work.",Object(Q.jsx)("br",{}),Object(Q.jsx)("br",{}),"Also keep the volume of media as high as possible."]})})]})},W=n(135);var X=function(){return Object(i.useEffect)((function(){W.a.initialize("G-VTP0D34CDL")}),[]),Object(Q.jsx)(l.a,{store:V,children:Object(Q.jsx)(U,{})})},Z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,207)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),i(e),a(e),r(e)}))};s.a.render(Object(Q.jsx)(a.a.StrictMode,{children:Object(Q.jsx)(X,{})}),document.getElementById("root")),Z()}},[[184,1,2]]]);
//# sourceMappingURL=main.99fbefb1.chunk.js.map