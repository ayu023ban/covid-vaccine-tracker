(this["webpackJsonpcovid-vaccine-tracker"]=this["webpackJsonpcovid-vaccine-tracker"]||[]).push([[0],{157:function(e,t,n){},160:function(e,t,n){},187:function(e,t,n){"use strict";n.r(t);var c,a=n(0),i=n.n(a),r=n(32),s=n.n(r),o=(n(157),n(158),n(159),n(160),n(116)),l=n(49),u=n(200),d=n(207),j=n(201),b=n(206),f=n(202),p=n(205),h=n(208),O=n(204),v=n(47),g=n(203),x=n(104),m=Object(x.a)({name:"player2",initialState:{pincodes:[]},reducers:{add:function(e,t){var n=t.payload,c=Array.from(e.pincodes);c.push(n),e.pincodes=c.filter((function(e,t,n){return n.indexOf(e)===t}))},remove:function(e,t){var n=t.payload;e.pincodes=e.pincodes.filter((function(e){return e!==n}))}}}),y=m.actions,w=y.add,k=y.remove,A=m.reducer,E=n.p+"static/media/beep.44d80d2e.mp3",C={result:{},soundEnabled:!0,audio:new Audio(E)},S=Object(x.a)({name:"player2",initialState:C,reducers:{changeResult:function(e,t){var n=t.payload;e.result[n.pincode]=n.result},deleteResult:function(e,t){var n=t.payload;delete e.result[n]}}}),D=S.actions,F=D.changeResult,N=D.deleteResult,P=S.reducer,I=n(80),T=n.n(I),B=n(132),R=n(114),G=n(133),L=n.n(G),M=n(139),H=n(23),J=Object(H.b)({pincodes:A,result:P}),_=n(77),z=Object(H.d)(J,(c=[_.a],H.a.apply(void 0,Object(M.a)(c)))),K=function(e){return new Promise((function(t){return setTimeout(t,e)}))},U=function(e){var t=e.getDate(),n=e.getMonth()+1;return t<10&&(t="0"+t),n<10&&(n="0"+n),t+"-"+n+"-"+e.getFullYear()},V=function(){var e=new Date,t=new Date(e);return t.setDate(t.getDate()+1),[U(t)]},W=function(){var e=Object(R.a)(T.a.mark((function e(){var t,n,c,a,i,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=V(),n=z.getState().result.result,c=z.getState().pincodes.pincodes.filter((function(e){return"finding"===n[e].status||"error"===n[e].status})),a=Object(B.a)(c);try{for(r=function(){for(var e=i.value,n=0;n<t.length;n++){var c="https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByPin?pincode=".concat(e,"&date=").concat(t[n]);L.a.get(c).then((function(t){var n=t.data,c=[],a=0,i=!1;for(var r in n.centers)for(var s in n.centers[r].sessions)n.centers[r].sessions[s].available_capacity>0&&(i=!0,a+=n.centers[r].sessions[s].available_capacity,c.push(n.centers[r].name));!1===i?z.dispatch(F({pincode:e,result:{status:"finding",availability:0,centers:[]}})):z.dispatch(F({pincode:e,result:{status:"found",availability:a,centers:c}}))})).catch((function(t){z.dispatch(F({pincode:e,result:{status:"error",availability:0,centers:[]}}))}))}},a.s();!(i=a.n()).done;)r()}catch(s){a.e(s)}finally{a.f()}case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(R.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return W(),t=5*z.getState().pincodes.pincodes.length,e.next=5,K(1e3*t);case 5:e.next=0;break;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=n(134),q=n(135),Q=n(140),X=n(138),Z=n(6),ee=function(e){Object(Q.a)(n,e);var t=Object(X.a)(n);function n(){var e;Object($.a)(this,n);for(var c=arguments.length,a=new Array(c),i=0;i<c;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).googleInit=null,e}return Object(q.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.timeout;this.googleInit=setTimeout((function(){"undefined"!==typeof window&&(window.adsbygoogle=window.adsbygoogle||[]).push({})}),e)}},{key:"componentWillUnmount",value:function(){this.googleInit&&clearTimeout(this.googleInit)}},{key:"render",value:function(){var e=this.props,t=e.classNames,n=e.slot;return Object(Z.jsx)("div",{className:t,children:Object(Z.jsx)("ins",{className:"adsbygoogle",style:{display:"block"},"data-ad-client":"ca-pub-9552396768426571","data-ad-slot":n,"data-ad-format":"auto","data-full-width-responsive":"true"})})}}]),n}(a.Component);ee.defaultProps={classNames:"",timeout:200};var te=ee,ne=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(""),r=Object(o.a)(i,2),s=r[0],x=r[1],m=Object(l.c)((function(e){return e.pincodes.pincodes})),y=Object(l.c)((function(e){return e.result.result})),A=Object(l.c)((function(e){return e.result.soundEnabled})),E=Object(l.b)(),C=Object(l.c)((function(e){return e.result.audio})),S=m.filter((function(e){return"error"===y[e].status}));return Object(a.useEffect)((function(){Y()}),[]),Object(a.useEffect)((function(){C.addEventListener("ended",(function(){this.currentTime=0,this.play()}),!1)}),[C]),Object(a.useEffect)((function(){C.muted=!A}),[C,A]),Object(a.useEffect)((function(){var e=!0;Object.keys(y).forEach((function(t){"found"===y[t].status&&(e=!1,C.paused&&C.play())})),e&&!C.paused&&C.pause()}),[C,y]),Object(Z.jsxs)(u.a,{fluid:!0,className:"p-0",style:{minHeight:"100vh",position:"relative",display:"flex",flexDirection:"column",height:"100%"},children:[Object(Z.jsx)(u.a,{fluid:!0,className:"main-header-container",children:Object(Z.jsx)(d.a,{inverted:!0,textAlign:"center",className:"main-title",children:"Covid Vaccine Tracker"})}),Object(Z.jsxs)(u.a,{fluid:!0,style:{flexDirection:"3",flexGrow:1},className:"p-0",children:[Object(Z.jsxs)(u.a,{children:[Object(Z.jsx)(j.a,{hidden:!0,section:!0}),Object(Z.jsx)(d.a,{textAlign:"center",size:"huge",children:"Enter Pincode to set Alert"}),Object(Z.jsx)(b.a,{basic:!0,children:Object(Z.jsxs)(f.a,{error:s.length>0,onSubmit:function(){6!==n.length?x("Pincode can only be of 6 digits"):(E(F({pincode:n,result:{status:"finding",availability:0,centers:[]}})),E(w(n)),x(""),c(""))},children:[Object(Z.jsx)(f.a.Input,{value:n,type:"number",onChange:function(e,t){t.value.length>6?x("Pincode cannot be more than 6 digits"):x(""),/^\d*$/.test(t.value)&&c(t.value)},action:{color:"teal",content:"Go",disabled:s.length>0||6!==n.length}}),Object(Z.jsx)(p.a,{error:!0,header:"Action Forbidden",content:s})]})})]}),Object(Z.jsxs)(u.a,{children:[Object(Z.jsx)(j.a,{hidden:!0}),m.length>0&&Object(Z.jsx)(b.a,{textAlign:"center",children:Object(Z.jsx)(d.a,{children:"Gives Alert For Following Pincodes"})}),Object(Z.jsx)(h.a,{stackable:!0,columns:4,children:m.map((function(e,t){return Object(Z.jsx)(h.a.Column,{children:Object(Z.jsx)(O.a,{color:"teal",children:Object(Z.jsxs)(O.a.Content,{children:[Object(Z.jsx)(v.a,{style:{float:"right",cursor:"pointer"},name:"trash",color:"teal",onClick:function(){E(k(e)),E(N(e))}}),Object(Z.jsx)(O.a.Header,{children:e})]})})},t)}))})]}),Object(Z.jsx)(u.a,{children:m.map((function(e){return"found"===y[e].status&&Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)(j.a,{hidden:!0}),Object(Z.jsxs)(b.a,{basic:!0,children:[Object(Z.jsxs)(d.a,{children:["Centers have been found in ",e," with"," ",y[e].availability," vaccines available:"]}),Object(Z.jsx)(g.a,{bulleted:!0,children:y[e].centers&&y[e].centers.filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return Object(Z.jsx)(g.a.Item,{children:e})}))})]})]})})).filter(Boolean)}),Object(Z.jsx)(j.a,{hidden:!0}),S.length>0&&Object(Z.jsx)(u.a,{basic:!0,textAlign:"center",children:Object(Z.jsxs)(p.a,{error:!0,children:["Error occured in getting data for ",S.join(", ")," ",S.length>1?"pincodes":"pincode"]})}),Object(Z.jsx)(te,{slot:"3472273087"})]}),Object(Z.jsx)(u.a,{fluid:!0,className:"footer mt-4",children:Object(Z.jsxs)(d.a,{inverted:!0,textAlign:"center",children:["Keep Browser open in background in order for this app to work.",Object(Z.jsx)("br",{}),Object(Z.jsx)("br",{}),"Also keep the volume of media as high as possible."]})})]})};var ce=function(){return Object(Z.jsx)(l.a,{store:z,children:Object(Z.jsx)(ne,{})})},ae=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,210)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),i(e),r(e)}))};s.a.render(Object(Z.jsx)(i.a.StrictMode,{children:Object(Z.jsx)(ce,{})}),document.getElementById("root")),ae()}},[[187,1,2]]]);
//# sourceMappingURL=main.d2e93e7b.chunk.js.map