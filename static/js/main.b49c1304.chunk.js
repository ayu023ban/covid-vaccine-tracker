(this["webpackJsonpcovid-vaccine-tracker"]=this["webpackJsonpcovid-vaccine-tracker"]||[]).push([[0],{153:function(e,t,n){},156:function(e,t,n){},183:function(e,t,n){"use strict";n.r(t);var c,a=n(0),i=n.n(a),r=n(32),s=n.n(r),o=(n(153),n(154),n(155),n(156),n(116)),l=n(49),u=n(196),d=n(203),j=n(197),b=n(205),f=n(198),h=n(201),p=n(202),O=n(200),v=n(47),x=n(199),g=n(103),m=Object(g.a)({name:"player2",initialState:{pincodes:[]},reducers:{add:function(e,t){var n=t.payload,c=Array.from(e.pincodes);c.push(n),e.pincodes=c.filter((function(e,t,n){return n.indexOf(e)===t}))},remove:function(e,t){var n=t.payload;e.pincodes=e.pincodes.filter((function(e){return e!==n}))}}}),y=m.actions,w=y.add,k=y.remove,A=m.reducer,E=n.p+"static/media/beep.44d80d2e.mp3",S={result:{},soundEnabled:!0,audio:new Audio(E)},C=Object(g.a)({name:"player2",initialState:S,reducers:{changeResult:function(e,t){var n=t.payload;e.result[n.pincode]=n.result},deleteResult:function(e,t){var n=t.payload;delete e.result[n]}}}),F=C.actions,D=F.changeResult,P=F.deleteResult,B=C.reducer,N=n(80),T=n.n(N),I=n(132),R=n(114),G=n(133),L=n.n(G),H=n(136),J=n(23),M=Object(J.b)({pincodes:A,result:B}),_=n(77),z=Object(J.d)(M,(c=[_.a],J.a.apply(void 0,Object(H.a)(c)))),K=function(e){return new Promise((function(t){return setTimeout(t,e)}))},V=function(e){var t=e.getDate(),n=e.getMonth()+1;return t<10&&(t="0"+t),n<10&&(n="0"+n),t+"-"+n+"-"+e.getFullYear()},Y=function(){var e=new Date,t=new Date(e);return t.setDate(t.getDate()+1),[V(t)]},$=function(){var e=Object(R.a)(T.a.mark((function e(){var t,n,c,a,i,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Y(),n=z.getState().result.result,c=z.getState().pincodes.pincodes.filter((function(e){return"finding"===n[e].status})),a=Object(I.a)(c);try{for(r=function(){for(var e=i.value,n=0;n<t.length;n++){var c="https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByPin?pincode=".concat(e,"&date=").concat(t[n]);L.a.get(c).then((function(t){var n=t.data,c=[],a=0,i=!1;for(var r in n.centers)for(var s in n.centers[r].sessions)n.centers[r].sessions[s].available_capacity>0&&(i=!0,a+=n.centers[r].sessions[s].available_capacity,c.push(n.centers[r].name));!1===i?z.dispatch(D({pincode:e,result:{status:"finding",availability:0,centers:[]}})):z.dispatch(D({pincode:e,result:{status:"found",availability:a,centers:c}}))})).catch((function(t){z.dispatch(D({pincode:e,result:{status:"error",availability:0,centers:[]}}))}))}},a.s();!(i=a.n()).done;)r()}catch(s){a.e(s)}finally{a.f()}case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(R.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $(),t=5*z.getState().pincodes.pincodes.length,e.next=5,K(1e3*t);case 5:e.next=0;break;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=n(7),U=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(""),r=Object(o.a)(i,2),s=r[0],g=r[1],m=Object(l.c)((function(e){return e.pincodes.pincodes})),y=Object(l.c)((function(e){return e.result.result})),A=Object(l.c)((function(e){return e.result.soundEnabled})),E=Object(l.b)(),S=Object(l.c)((function(e){return e.result.audio})),C=m.filter((function(e){return"error"===y[e].status}));return Object(a.useEffect)((function(){q()}),[]),Object(a.useEffect)((function(){S.addEventListener("ended",(function(){this.currentTime=0,this.play()}),!1)}),[S]),Object(a.useEffect)((function(){S.muted=!A}),[S,A]),Object(a.useEffect)((function(){var e=!0;Object.keys(y).forEach((function(t){"found"===y[t].status&&(e=!1,S.paused&&S.play())})),e&&!S.paused&&S.pause()}),[S,y]),Object(Q.jsxs)(u.a,{fluid:!0,className:"p-0",style:{minHeight:"100vh",position:"relative",display:"flex",flexDirection:"column",height:"100%"},children:[Object(Q.jsx)(u.a,{fluid:!0,className:"main-header-container",children:Object(Q.jsx)(d.a,{inverted:!0,textAlign:"center",className:"main-title",children:"Covid Vaccine Tracker"})}),Object(Q.jsxs)(u.a,{fluid:!0,style:{flexDirection:"3",flexGrow:1},className:"p-0",children:[Object(Q.jsxs)(u.a,{children:[Object(Q.jsx)(j.a,{hidden:!0,section:!0}),Object(Q.jsx)(d.a,{textAlign:"center",size:"huge",children:"Enter Pincode to set Alert"}),Object(Q.jsx)(b.a,{basic:!0,children:Object(Q.jsxs)(f.a,{error:s.length>0,onSubmit:function(){6!==n.length?g("Pincode can only be of 6 digits"):(E(D({pincode:n,result:{status:"finding",availability:0,centers:[]}})),E(w(n)),g(""),c(""))},children:[Object(Q.jsx)(f.a.Input,{value:n,type:"number",onChange:function(e,t){t.value.length>6?g("Pincode cannot be more than 6 digits"):g(""),/^\d*$/.test(t.value)&&c(t.value)},action:{color:"teal",content:"Go",disabled:s.length>0||6!==n.length}}),Object(Q.jsx)(h.a,{error:!0,header:"Action Forbidden",content:s})]})})]}),Object(Q.jsxs)(u.a,{children:[Object(Q.jsx)(j.a,{hidden:!0}),m.length>0&&Object(Q.jsx)(b.a,{textAlign:"center",children:Object(Q.jsx)(d.a,{children:"Gives Alert For Following Pincodes"})}),Object(Q.jsx)(p.a,{stackable:!0,columns:4,children:m.map((function(e,t){return Object(Q.jsx)(p.a.Column,{children:Object(Q.jsx)(O.a,{color:"teal",children:Object(Q.jsxs)(O.a.Content,{children:[Object(Q.jsx)(v.a,{style:{float:"right",cursor:"pointer"},name:"trash",color:"teal",onClick:function(){E(k(e)),E(P(e))}}),Object(Q.jsx)(O.a.Header,{children:e})]})})},t)}))})]}),Object(Q.jsx)(u.a,{children:m.map((function(e){return"found"===y[e].status&&Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(j.a,{hidden:!0}),Object(Q.jsxs)(b.a,{basic:!0,children:[Object(Q.jsxs)(d.a,{children:["Centers have been found in ",e," with"," ",y[e].availability," vaccines available:"]}),Object(Q.jsx)(x.a,{bulleted:!0,children:y[e].centers&&y[e].centers.filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return Object(Q.jsx)(x.a.Item,{children:e})}))})]})]})})).filter(Boolean)}),Object(Q.jsx)(j.a,{hidden:!0}),C.length>0&&Object(Q.jsx)(u.a,{basic:!0,textAlign:"center",children:Object(Q.jsxs)(h.a,{error:!0,children:["Error occured in getting data for ",C.join(", ")," ",C.length>1?"pincodes":"pincode"]})})]}),Object(Q.jsx)(u.a,{fluid:!0,className:"footer mt-4",children:Object(Q.jsxs)(d.a,{inverted:!0,textAlign:"center",children:["Keep Browser open in background in order for this app to work.",Object(Q.jsx)("br",{}),Object(Q.jsx)("br",{}),"Also keep a the volume of media as high as possible."]})})]})};var W=function(){return Object(Q.jsx)(l.a,{store:z,children:Object(Q.jsx)(U,{})})},X=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,206)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),i(e),r(e)}))};s.a.render(Object(Q.jsx)(i.a.StrictMode,{children:Object(Q.jsx)(W,{})}),document.getElementById("root")),X()}},[[183,1,2]]]);
//# sourceMappingURL=main.b49c1304.chunk.js.map